---
layout: post
title: 1 - 비즈니스 도메인 분석하기
tags: [DDD, Domain-Driven-Develop]
date: 2025-08-04 10:00:00 +0900
---

# 비즈니스 도메인이란?

- 비즈니스 도메인이란 기업의 주요 활동 영역을 말함 → 회사가 고객에게 제공하는 서비스
    - 페덱스 - 택배
    - 스타벅스 - 커피
    - 월마트 - 소매
- 꼭 하나만이 아닌 여러 도메인을 운영할 수 있음
    - 아마존 - 소매, 클라우드 서비스
    - 우버 - 차량 공유, 배달
- 도메인이 자주 변경될 수도 있다
    - 노키아 - 목재 가구, 고무 제조, 통신, 모바일 등

# 하위 도메인이란?

- 비즈니스 도메인의 목표를 달성하기 위해 기업은 여러 가지 하위 도메인을 운영해야 함
    - 하위 도메인 → 비즈니스 활동의 세분화된 영역
- 모든 회사의 하위 도메인은 고객에게 제공하는 서비스 단위로 비즈니스 도메인을 만듬
    - 하위 도메인은 전체 시스템에서 하나의 구성요소
    - 각각의 하위 도메인은 회사의 비즈니스 도메인에서 목표를 달성하기 위해 서로 상호작용해야 함

→ 하나의 도메인으로는 회사가 성공하기 어렵기 때문에 

## 하위 도메인의 유형

- 소프트웨어 시스템이 다양한 아키텍쳐 구성요소로 이뤄진 것처럼, 하위 도메인은 서로 다른 전략적 비즈니스 가치를 가짐
- 도메인 주도 설계에서 하위 도메인은 세가지 유형으로 구성됨
    - 핵심
    - 일반
    - 지원

## 핵심 하위 도메인

- 핵심 하위 도메인 : 회사가 경쟁업체와 다르게 수행하고 있는 것
    - 새로운 제품이나 서비슬를 발명하거나 기존 프로세스를 최적화하여 비용을 줄이는 것
        - 우버 - 새로운 방식의 운송 수단인 승차 공유 서비스를 제공
            - 같은 방향을 향하는 손님을 매칭해서 비용 절감
        - 구글 검색 순위 알고리즘

### **복잡성**

- 구현하기 쉬운 핵심 하위 도메인은 일시적인 경쟁 우위만을 제공할 수 있음
    - 따라서 핵심 하위 도메인은 자연스럽게 복잡해짐
    - 회사의 핵심 비즈니스는 높은 진입장벽이 있어야 함
    - 경쟁사가 회사의 솔루션을 모방하거나 복제하기가 어려워야 한다

### **경쟁 우위의 원천**

- 핵심 하위 도메인에 반드시 기술이 들어가야 하는 것은 아님
    - 모든 비즈니스 문제가 알고리즘이나 기술 솔루션으로 해결되지는 않음
- 회사의 경쟁 우위는 다양한 원천에서 나올 수 있음
    - 보석 제조업체
        - 온라인 샵 → 중요하지만 핵심 하위 도메인 X
        - 보석 디자인
    - 수동 사기 탐지 전문 회사
        - 분석가가 소프트웨어 시스템을 개발함 → 핵심 X
        - 분석가가 수행하는 작업 → 핵심

## 일반 하위 도메인

- 모든 회사가 같은 방식으로 수행하는 비즈니스 활동
- 핵심 하위 도메인고 ㅏ마찬가지로 일반 하위 도메인은 일반적으로 복잡하고 구현하기 어려움
    - 일반 하위 도매인은 회사애 경쟁력을 제공하지 않음 → 이미 다 쓰고 있어서
        - 사용자 인증 때, 전용 매커니즘을 만드는 대신 기존에 있는 거 사용
            - 이미 테스트해서 안전할 것이라고 예상
        - 보석 판매업
            - 온라인 쇼핑몰 → 일반 하위 도메인

## 지원 하위 도메인

- 회사의 비즈니스를 지원하는 활동
    - 핵심 하위 도메인과 달리 어떠한 경쟁 우위도 제공하지 않음
    - 광고회사에서 창의적인 카탈로그
        - 기업의 광고 관리와 제공 시스템을 구현하는데 필수
        - 회사의 지원 하위 도메인 중 하나로 만듬
    - 차별되는 특징은 솔루션의 비즈니스 로직의 복잡성
        - 어떠한 경쟁 우위도 제공해주지 않음으로 높은 진입장벽이 필요없음

## 하위 도메인 비교

### 경쟁 우위

- 핵심 하위 도메인만이 회사에 경쟁 우위를 제공함
    - 경쟁사와 차별화하기 위한 회사의 전략
        - 일반 하위 도메인은 경쟁 우위의 원천이 될 수 없음
        
        → 업계 경쟁력에 영향을 주지 않기 때문에 + 진입장벽이 낮음
        
- 회사가 해결할 수 있는 문제가 더 복잡할수록 더 많ㅇ느 비즈니스 가치를 제공할 수 있음
    - 소비자에게 서비스를 제공하는 것에 국한되지 않음
        - 복잡한 문제를 해결하여 비즈니스를 더욱 최적화하고 효율적으로 만들 수 있음
        - 경쟁업체와 동일한 수준의 서비스를 더 낮은 비용으로 제공함으로써 경쟁우위를 만들 수 있음

### 복잡성

- 좀 더 기술적인 관점에서 보면 하위 도메인의 유형에 따라 복잡성의 수준이 다르기 때문에 조직의 하위 도메인을 식별하는 것이 중요
- 소프트웨어를 설계할 때 우리는 비즈니스 요구사항의 복잡성을 수용할 수 있는 도구와 기술을 선택해야함
    
    → 견고한 소프트웨어 솔류션을 설계하기 위해 하위 도메인을 식별하는 것은 반드시 필요하다
    
- 지원 하위 도메인의 비즈니스 로직은 간단함
    - 기본적인 ETL 작업 + CRUD 인터페이스
    - 비즈니스 로직이 명확함
    
    → 입력의 유효성을 검증하거나 다른 구조의 데이터로 변환하는 것 이상의 로직에서 벗어나지 않음
    
- 일반 하위 도메인은 훨씬 더 복잡
    - 다른 사람들이 이미 이러한 문제를 해결하는 데 시간과 노력을 투자하는데는 그럴만한 이유가 있다 + 사소하지도 않음
    - 지식 가용성 관점에서 일반 하위 도메인은 “알려진 미지”이다
        - “모른다는 사실”을 알고 있고, 이 지식을 쉽게 구할 수 있음
            
            → 업계에서 인정하는 모범 사례 사용, 전문 컨설턴트 고용
            
- 핵심 하위 도메인은 복잡
    - 회사의 수익성이 좌우되기 때문에 경쟁업체가 모방하기 최대한 어려워야 함
- 핵심 하위 도메인과 지원 하위 도메인을 구별하는 것이 어려울 수 있음
    - 질문 하나면 된다
    
    → 하위 도메인을 부업으로 전환할 수 있냐?, 기꺼이 비용을 지불할 의사가 있냐?
    
- 일반 VS 지원을 구별하는 질문
    
    → 외부 솔루션을 사용하는 것보다 직접 구현 중 어떤 것이 더 간단하고 저렴한지 → 지원
    
- 좀 더 기술적인 관점에서 소프트웨어 설계에 영향을 미치는 복잡한 핵심 하위 도메인을 식별하는 것이 중요
    - 핵심 하위 도메인은 반드시 소프트웨어와 관련이 있는 것이 **아님**
- 소프트웨어 관련 핵심 하위 도메인을 식별하기 위한 또 다른 유용한 지침은 여러분이 모델링하고 코드로 구현해야 하는 비즈니스 로직의 복잡성을 평가하는 것
    - 비즈니스 로직이 CRUD와 유사? → 지원 하위 도메인
    - 복잡한 알고리즘 또는 비즈니스 프로세스 규칙과 변하지 않는 속성에 의해 조정되는 비즈니스 프로세스 구현? → 핵심 하위 도메인

![1-1](/assets/images/ddd/1-1.png)

### 변동성

- 핵심 하위 도메인은 자주 변경될 수 있음
    - 한번의 시도만으로 문제가 해결될 수 있다면 → 다른 기업에서도 빠르게 따라잡을 수 있음 → 경쟁 우위에서 좋은 포지션 X
- 결과적으로 핵심 하위 도메인에 대한 솔류션을 찾을 수 있다
    - 지속적인 진화 필수
- 지원 하위 도메인은 그다지 안바뀜
    - 경쟁 우위를 제공하지 않기에 → 투자한 동일한 노력에 비해 가치는 적기 때문
- 기존 솔루션이 있음에도 일반 하위 도메인은 시간이 지남에 따라 변경될 수 있음
    - 보안 패치, 버그 수정 → 일반적인 문제에 대한 완전히 새로운 솔루션

### 솔루션 전략

- 핵심 하위 도메인은 업계에서 기업이 다른 경쟁사와 경쟁할 수 있는 능력을 제공
- 핵심 뿐 아니라 지원, 일반등 다른 하위 도메인 또한 필요
- 도메인에 맞는 솔루션이 필요
- 핵심 하위 도메인
    - 사내에서 개발
        - 외부에서 개발하면 기술이 빼앗길 가능성 높음 → 경쟁 우위 약화
    - 유지보수가 가능하고 쉽게 개선될 수 있는 구조
        - 자주 바뀔 예정
- 일반
    - 오픈소스 솔루션을 채택하는 것이 비용 면에서 효율적
- 지원
    - 얘도 채택하는 것이 효율
    - 허나 솔루션이 없는 경우 존재 → 직접 구현해야함
    - 고급기술을 요구하지 않기 때문에 인턴이나 신입에게 좋은 연습 기회

![1-2](/assets/images/ddd/1-2.png)

## 하위 도메인 경계 식별

- 하위 도메인과 해당 유형을 식별하면 소프트웨어 솔루션을 구축할 때 설계와 관련된 의사결정에 상당한 도움이 됨
    - 도메인 간의 경계를 식별하는 방법은 뭘까??
- 하위 도메인과 그 유형은 회사 비즈니스 전략에 따라 바뀜, 동일한 분야에서 다른 회사와 경쟁하기 위해 자신을 차별화하는 방법
- 하위 도메인은 대다수의 소프트웨어에서 이미 존재
    - 허나 그 경계를 알기 어렵고, 그 경계를 직접 파악하지 않는 이상 알지 못함

### 하위 도메인 정제

- 크게 나눈 하위 도메인은 좋은 출발점, 허나 문제는 세부 사항에 있음
    - 비즈니스 기능의 복잡한 내용에 숨겨진 중요한 정보를 놓치지 않아야 함
- 하나의 서비스 내부에는 여러가지 하위 도메인이 존재
    - 여기서 기존에 있던 도메인에 추가적인 알고리즘을 작성하여 핵심 도메인을 개발
        
        → 고객서비스에서 교대 관리를 잘했던 사람과 연결하는 알고리즘 → 핵심 하위 도메인
        

![1-3](/assets/images/ddd/1-3.png)

- 허나 더 세부적인 통찰력을 얻기 위해 무한정으로 파헤칠 수는 없음 → 그럼 언제 멈춰야할까?

## 응집된 유스케이스를 하위 도메인으로

- 기술적인 관점에서 하위 도메인은 상호 연관되고 응집된 유스케이스의 집합과 유사하다
    - 이러한 유스케이스 집합에서는 보통 동일한 행위자, 비즈니스 엔티티를 포함하고 모두 밀접하게 관련된 데이터의 집합을 다룸
        
        ![1-4](/assets/images/ddd/1-4.png)
        
- 세분화된 하위 도메인을 찾는 것을 중단하는 시점을 결정하기 위한 지침으로 ‘응집된 유스케이스의 집합인 하위 도메인’이라는 정의를 사용할 수 있음
    - 이것은 하위 도메인의 가장 정확한 경계가 됨
- 하위 도메인은 가장 중요하고, 변동성이 있고, 복잡하다
    - 따라서 온 신경을 곤두세워 가능한 한 많이 정제하는 것이 중요하다
    - 이러한 노력은 우리가 일반 및 지원 기능 모두를 추출하고, 집중하고 있는 기능에 시간을 투자할 수 있게 함
- 하지만 지원 및 일반 하위 도메인의 경우에는 이러한 정제 작업을 다소 완화할 수 있음
    - 더 자세히 살펴봐도 소프트웨어 설계와 관련된 의사결정을 내리는데 도움이 될 수 있는 새로운 통찰이 나오지 않으면 중단하는 것이 좋음
    - ex) 세분화된 하위 도메인이 세분화 전의 하위 도메인과 모두 동일한 유형
- 하위 도메인을 식별할 때 고려해야 할 또 다른 중요한 질문은 하위 도메인이 모두 필요한지 여부

![1-5](/assets/images/ddd/1-5.png)

### 핵심에 집중

- 하위 도메인은 소프트웨어 설계 의사결정을 내리는 프로세스의 어려움을 쉽게 해결하도록 돕는 도구
    - 모든 조직에는 경쟁 우위를 제공하지만 소프트웨어와는 아무 관련이 없는 비즈니스 기능이 많다
- 하위 도메인을 찾을 때 소프트웨어와 관련되지 않은 비즈니스 기능을 식별하고, 그 자체로 인정하며 작업중인 소프트웨어 시스템과 관련된 비즈니스에 집중하는 것이 중요

## 도메인 분석 예제

### Gigmaster : 티켓 판매 및 유통 회사

- 핵심
    - 추천 엔진
    - 데이터 익명화
    - 모바일 앱
- 일반
    - 암호화 - 모든 데이터 암호화
    - 회계 - 회사가 영업을 하고 있기에
    - 정산 - 고객에게 청구
    - 인증 및 권한 부여 - 사용자 식별
- 지원
    - 음악 스트리밍 서비스와 연동
    - 소셜네트워크와 연동
    - 참석 공연 모듈

→ 그니까 정리하자면 각자의 주요 과제가 있고, 그건 핵심 
    자주 바뀌고, 사내에서 개발해야하면 핵심, 오픈소스 쓰면 일반, 하청맡길 수 있다면 지원

## 도메인 전문가는 어떤 사람인가?

- 도메인 전문가는 우리가 모델링하곡 코드로 구현할 비즈니스의 모든 복잡성을 알고 있는 주제 전문가 → 소프트웨어의 비즈니스 도메인에 대한 권위자
- 비즈니스를 대표
    - 요구사항 수집하는 분석가 X
    - 시스템 설계하는 엔지니어 X
- 요구사항을 제시하는 사람 또는 소프트웨어의 최종 사용자
    - 전문성 범위는 다양함
    - 전체 서비스에 대한 전문가, 하위 도메인에 대한 전문가 등